import{a as rt,j as Z,F as at}from"./jsx-runtime-5BUNAZ9W.js";import{M as ie}from"./mapbox-gl-oa9XOBpX.js";import{r as d,R as ot}from"./index-4g5l5LRQ.js";import{r as se}from"./index-qTf6isfD.js";const Ve=d.createContext({});function ut(e){var t=d.useRef(e);return t.current=e,t}var it=!!(typeof window<"u"&&window.document&&window.document.createElement),X,Y;it&&(!((X=window)===null||X===void 0||(Y=X.navigator)===null||Y===void 0)&&Y.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);var Fe=function(t){return typeof t=="function"};function N(e){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(e)}function lt(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function o(a,u){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=r.has(a);if(s)return!1;if(a===u)return!0;if(n&&l>1)return!1;r.add(a);var i=l+1;if(Array.isArray(a)){if(!Array.isArray(u)||a.length!==u.length)return!1;for(var f=0;f<a.length;f++)if(!o(a[f],u[f],i))return!1;return!0}if(a&&u&&N(a)==="object"&&N(u)==="object"){var c=Object.keys(a);return c.length!==Object.keys(u).length?!1:c.every(function(p){return o(a[p],u[p],i)})}return!1}return o(e,t)}var st=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return lt(t,n)},ct=function(t){return function(n,r){var o=d.useRef(),a=d.useRef(0);(r===void 0||!st(r,o.current))&&(o.current=r,a.current+=1),t(n,[a.current])}};function te(e){"@babel/helpers - typeof";return te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(e)}function ze(e){typeof e!="function"&&console.error("useUnmount expected parameter is a function, got ".concat(te(e)));var t=ut(e);d.useEffect(function(){return function(){t.current()}},[])}var dt=ct(d.useEffect);function ft(e,t){return typeof e=="function"?e.length?e(t):e():e}function pt(e,t){return gt(e)||vt(e,t)||mt(e,t)||yt()}function yt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mt(e,t){if(e){if(typeof e=="string")return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}}function ce(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,u,l=[],s=!0,i=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(f){i=!0,o=f}finally{try{if(!s&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(i)throw o}}return l}}function gt(e){if(Array.isArray(e))return e}function ht(e){var t=d.useState(e),n=pt(t,2),r=n[0],o=n[1],a=d.useRef(r);a.current=r;var u=d.useCallback(function(s){a.current=ft(s,a.current),o(a.current)},[]),l=d.useCallback(function(){return a.current},[]);return[r,u,l]}var bt=function(t,n){return t!==n};function Et(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bt,n=d.useRef(),r=d.useRef();return t(r.current,e)&&(n.current=r.current,r.current=e),n.current}function de(e,t){return Tt(e)||Mt(e,t)||St(e,t)||_t()}function _t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function St(e,t){if(e){if(typeof e=="string")return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}}function fe(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,a=!1,u,l;try{for(n=n.call(e);!(o=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));o=!0);}catch(s){a=!0,l=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function Tt(e){if(Array.isArray(e))return e}var At=function(){var t=d.useState(function(){return document.createElement("div")}),n=de(t,1),r=n[0],o=d.useState({render:function(){return null},remove:function(){return null}}),a=de(o,2),u=a[0],l=a[1],s=d.useCallback(function(i){var f=function(y){var m=y.children;return m?se.createPortal(m,i):null},c=function(y){y&&se.unmountComponentAtNode(y)};return{render:f,remove:c}},[]);return d.useEffect(function(){r&&u.remove();var i=s(r);return l(i),function(){i.remove(r)}},[r]),{Portal:u.render,container:r}};const wt=(e,t)=>e?e.map((n,r)=>Object.is(e[r],t==null?void 0:t[r])?-1:r).filter(n=>n>=0):t?t.map((n,r)=>r):[],Ct=(e,t)=>{const n=d.useRef();d.useEffect(()=>{const r=wt(n.current,t),o=n.current;return n.current=t,e(r,o,t)},t)},Be=(e,t,n)=>{const{eventMap:r={},eventList:o=[]}=n;Ct((a=[],u,l)=>{if(!e)return;let s=a.filter(i=>!!i).map(i=>i-1);a.includes(0)&&(s=o.map((i,f)=>f)),s.forEach(i=>{const f=r[o[i]],c=u==null?void 0:u[i+1],p=l==null?void 0:l[i+1];c&&e.off(f,c),p&&e.on(f,p)})},[e,...o.map(a=>t[a])]),ze(()=>{e&&o.forEach(a=>{const u=r[a],l=t[a];u&&l&&e.off(u,l)})})};var Ze=typeof global=="object"&&global&&global.Object===Object&&global,xt=typeof self=="object"&&self&&self.Object===Object&&self,_=Ze||xt||Function("return this")(),D=_.Symbol,Ne=Object.prototype,Dt=Ne.hasOwnProperty,Pt=Ne.toString,L=D?D.toStringTag:void 0;function Lt(e){var t=Dt.call(e,L),n=e[L];try{e[L]=void 0;var r=!0}catch{}var o=Pt.call(e);return r&&(t?e[L]=n:delete e[L]),o}var Ot=Object.prototype,Rt=Ot.toString;function $t(e){return Rt.call(e)}var jt="[object Null]",qt="[object Undefined]",pe=D?D.toStringTag:void 0;function V(e){return e==null?e===void 0?qt:jt:pe&&pe in Object(e)?Lt(e):$t(e)}function $(e){return e!=null&&typeof e=="object"}var U=Array.isArray;function Ue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var It="[object AsyncFunction]",Vt="[object Function]",Ft="[object GeneratorFunction]",zt="[object Proxy]";function We(e){if(!Ue(e))return!1;var t=V(e);return t==Vt||t==Ft||t==It||t==zt}var J=_["__core-js_shared__"],ye=function(){var e=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Bt(e){return!!ye&&ye in e}var Zt=Function.prototype,Nt=Zt.toString;function w(e){if(e!=null){try{return Nt.call(e)}catch{}try{return e+""}catch{}}return""}var Ut=/[\\^$.*+?()[\]{}|]/g,Wt=/^\[object .+?Constructor\]$/,Gt=Function.prototype,Ht=Object.prototype,kt=Gt.toString,Kt=Ht.hasOwnProperty,Xt=RegExp("^"+kt.call(Kt).replace(Ut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yt(e){if(!Ue(e)||Bt(e))return!1;var t=We(e)?Xt:Wt;return t.test(w(e))}function Jt(e,t){return e==null?void 0:e[t]}function P(e,t){var n=Jt(e,t);return Yt(n)?n:void 0}var ne=P(_,"WeakMap"),Qt=9007199254740991,en=/^(?:0|[1-9]\d*)$/;function tn(e,t){var n=typeof e;return t=t??Qt,!!t&&(n=="number"||n!="symbol"&&en.test(e))&&e>-1&&e%1==0&&e<t}function Ge(e,t){return e===t||e!==e&&t!==t}var nn=9007199254740991;function He(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=nn}function rn(e){return e!=null&&He(e.length)&&!We(e)}var an=Object.prototype;function on(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||an;return e===n}function un(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var ln="[object Arguments]";function me(e){return $(e)&&V(e)==ln}var ke=Object.prototype,sn=ke.hasOwnProperty,cn=ke.propertyIsEnumerable,dn=me(function(){return arguments}())?me:function(e){return $(e)&&sn.call(e,"callee")&&!cn.call(e,"callee")};function fn(){return!1}var Ke=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ve=Ke&&typeof module=="object"&&module&&!module.nodeType&&module,pn=ve&&ve.exports===Ke,ge=pn?_.Buffer:void 0,yn=ge?ge.isBuffer:void 0,re=yn||fn,mn="[object Arguments]",vn="[object Array]",gn="[object Boolean]",hn="[object Date]",bn="[object Error]",En="[object Function]",_n="[object Map]",Sn="[object Number]",Mn="[object Object]",Tn="[object RegExp]",An="[object Set]",wn="[object String]",Cn="[object WeakMap]",xn="[object ArrayBuffer]",Dn="[object DataView]",Pn="[object Float32Array]",Ln="[object Float64Array]",On="[object Int8Array]",Rn="[object Int16Array]",$n="[object Int32Array]",jn="[object Uint8Array]",qn="[object Uint8ClampedArray]",In="[object Uint16Array]",Vn="[object Uint32Array]",g={};g[Pn]=g[Ln]=g[On]=g[Rn]=g[$n]=g[jn]=g[qn]=g[In]=g[Vn]=!0;g[mn]=g[vn]=g[xn]=g[gn]=g[Dn]=g[hn]=g[bn]=g[En]=g[_n]=g[Sn]=g[Mn]=g[Tn]=g[An]=g[wn]=g[Cn]=!1;function Fn(e){return $(e)&&He(e.length)&&!!g[V(e)]}function zn(e){return function(t){return e(t)}}var Xe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,R=Xe&&typeof module=="object"&&module&&!module.nodeType&&module,Bn=R&&R.exports===Xe,Q=Bn&&Ze.process,he=function(){try{var e=R&&R.require&&R.require("util").types;return e||Q&&Q.binding&&Q.binding("util")}catch{}}(),be=he&&he.isTypedArray,Ye=be?zn(be):Fn,Zn=Object.prototype,Nn=Zn.hasOwnProperty;function Un(e,t){var n=U(e),r=!n&&dn(e),o=!n&&!r&&re(e),a=!n&&!r&&!o&&Ye(e),u=n||r||o||a,l=u?un(e.length,String):[],s=l.length;for(var i in e)(t||Nn.call(e,i))&&!(u&&(i=="length"||o&&(i=="offset"||i=="parent")||a&&(i=="buffer"||i=="byteLength"||i=="byteOffset")||tn(i,s)))&&l.push(i);return l}function Wn(e,t){return function(n){return e(t(n))}}var Gn=Wn(Object.keys,Object),Hn=Object.prototype,kn=Hn.hasOwnProperty;function Kn(e){if(!on(e))return Gn(e);var t=[];for(var n in Object(e))kn.call(e,n)&&n!="constructor"&&t.push(n);return t}function Xn(e){return rn(e)?Un(e):Kn(e)}var j=P(Object,"create");function Yn(){this.__data__=j?j(null):{},this.size=0}function Jn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Qn="__lodash_hash_undefined__",er=Object.prototype,tr=er.hasOwnProperty;function nr(e){var t=this.__data__;if(j){var n=t[e];return n===Qn?void 0:n}return tr.call(t,e)?t[e]:void 0}var rr=Object.prototype,ar=rr.hasOwnProperty;function or(e){var t=this.__data__;return j?t[e]!==void 0:ar.call(t,e)}var ur="__lodash_hash_undefined__";function ir(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=j&&t===void 0?ur:t,this}function A(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}A.prototype.clear=Yn;A.prototype.delete=Jn;A.prototype.get=nr;A.prototype.has=or;A.prototype.set=ir;function lr(){this.__data__=[],this.size=0}function H(e,t){for(var n=e.length;n--;)if(Ge(e[n][0],t))return n;return-1}var sr=Array.prototype,cr=sr.splice;function dr(e){var t=this.__data__,n=H(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():cr.call(t,n,1),--this.size,!0}function fr(e){var t=this.__data__,n=H(t,e);return n<0?void 0:t[n][1]}function pr(e){return H(this.__data__,e)>-1}function yr(e,t){var n=this.__data__,r=H(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function S(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}S.prototype.clear=lr;S.prototype.delete=dr;S.prototype.get=fr;S.prototype.has=pr;S.prototype.set=yr;var q=P(_,"Map");function mr(){this.size=0,this.__data__={hash:new A,map:new(q||S),string:new A}}function vr(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function k(e,t){var n=e.__data__;return vr(t)?n[typeof t=="string"?"string":"hash"]:n.map}function gr(e){var t=k(this,e).delete(e);return this.size-=t?1:0,t}function hr(e){return k(this,e).get(e)}function br(e){return k(this,e).has(e)}function Er(e,t){var n=k(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function C(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}C.prototype.clear=mr;C.prototype.delete=gr;C.prototype.get=hr;C.prototype.has=br;C.prototype.set=Er;function _r(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function Sr(){this.__data__=new S,this.size=0}function Mr(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Tr(e){return this.__data__.get(e)}function Ar(e){return this.__data__.has(e)}var wr=200;function Cr(e,t){var n=this.__data__;if(n instanceof S){var r=n.__data__;if(!q||r.length<wr-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new C(r)}return n.set(e,t),this.size=n.size,this}function M(e){var t=this.__data__=new S(e);this.size=t.size}M.prototype.clear=Sr;M.prototype.delete=Mr;M.prototype.get=Tr;M.prototype.has=Ar;M.prototype.set=Cr;function xr(e,t){for(var n=-1,r=e==null?0:e.length,o=0,a=[];++n<r;){var u=e[n];t(u,n,e)&&(a[o++]=u)}return a}function Dr(){return[]}var Pr=Object.prototype,Lr=Pr.propertyIsEnumerable,Ee=Object.getOwnPropertySymbols,Or=Ee?function(e){return e==null?[]:(e=Object(e),xr(Ee(e),function(t){return Lr.call(e,t)}))}:Dr;const Rr=Or;function $r(e,t,n){var r=t(e);return U(e)?r:_r(r,n(e))}function _e(e){return $r(e,Xn,Rr)}var ae=P(_,"DataView"),oe=P(_,"Promise"),ue=P(_,"Set"),Se="[object Map]",jr="[object Object]",Me="[object Promise]",Te="[object Set]",Ae="[object WeakMap]",we="[object DataView]",qr=w(ae),Ir=w(q),Vr=w(oe),Fr=w(ue),zr=w(ne),T=V;(ae&&T(new ae(new ArrayBuffer(1)))!=we||q&&T(new q)!=Se||oe&&T(oe.resolve())!=Me||ue&&T(new ue)!=Te||ne&&T(new ne)!=Ae)&&(T=function(e){var t=V(e),n=t==jr?e.constructor:void 0,r=n?w(n):"";if(r)switch(r){case qr:return we;case Ir:return Se;case Vr:return Me;case Fr:return Te;case zr:return Ae}return t});const Ce=T;var Br=_.Uint8Array;const xe=Br;var Zr="__lodash_hash_undefined__";function Nr(e){return this.__data__.set(e,Zr),this}function Ur(e){return this.__data__.has(e)}function W(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new C;++t<n;)this.add(e[t])}W.prototype.add=W.prototype.push=Nr;W.prototype.has=Ur;function Wr(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Gr(e,t){return e.has(t)}var Hr=1,kr=2;function Je(e,t,n,r,o,a){var u=n&Hr,l=e.length,s=t.length;if(l!=s&&!(u&&s>l))return!1;var i=a.get(e),f=a.get(t);if(i&&f)return i==t&&f==e;var c=-1,p=!0,y=n&kr?new W:void 0;for(a.set(e,t),a.set(t,e);++c<l;){var m=e[c],v=t[c];if(r)var h=u?r(v,m,c,t,e,a):r(m,v,c,e,t,a);if(h!==void 0){if(h)continue;p=!1;break}if(y){if(!Wr(t,function(E,b){if(!Gr(y,b)&&(m===E||o(m,E,n,r,a)))return y.push(b)})){p=!1;break}}else if(!(m===v||o(m,v,n,r,a))){p=!1;break}}return a.delete(e),a.delete(t),p}function Kr(e){var t=-1,n=Array(e.size);return e.forEach(function(r,o){n[++t]=[o,r]}),n}function Xr(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Yr=1,Jr=2,Qr="[object Boolean]",ea="[object Date]",ta="[object Error]",na="[object Map]",ra="[object Number]",aa="[object RegExp]",oa="[object Set]",ua="[object String]",ia="[object Symbol]",la="[object ArrayBuffer]",sa="[object DataView]",De=D?D.prototype:void 0,ee=De?De.valueOf:void 0;function ca(e,t,n,r,o,a,u){switch(n){case sa:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case la:return!(e.byteLength!=t.byteLength||!a(new xe(e),new xe(t)));case Qr:case ea:case ra:return Ge(+e,+t);case ta:return e.name==t.name&&e.message==t.message;case aa:case ua:return e==t+"";case na:var l=Kr;case oa:var s=r&Yr;if(l||(l=Xr),e.size!=t.size&&!s)return!1;var i=u.get(e);if(i)return i==t;r|=Jr,u.set(e,t);var f=Je(l(e),l(t),r,o,a,u);return u.delete(e),f;case ia:if(ee)return ee.call(e)==ee.call(t)}return!1}var da=1,fa=Object.prototype,pa=fa.hasOwnProperty;function ya(e,t,n,r,o,a){var u=n&da,l=_e(e),s=l.length,i=_e(t),f=i.length;if(s!=f&&!u)return!1;for(var c=s;c--;){var p=l[c];if(!(u?p in t:pa.call(t,p)))return!1}var y=a.get(e),m=a.get(t);if(y&&m)return y==t&&m==e;var v=!0;a.set(e,t),a.set(t,e);for(var h=u;++c<s;){p=l[c];var E=e[p],b=t[p];if(r)var le=u?r(b,E,p,t,e,a):r(E,b,p,e,t,a);if(!(le===void 0?E===b||o(E,b,n,r,a):le)){v=!1;break}h||(h=p=="constructor")}if(v&&!h){var F=e.constructor,z=t.constructor;F!=z&&"constructor"in e&&"constructor"in t&&!(typeof F=="function"&&F instanceof F&&typeof z=="function"&&z instanceof z)&&(v=!1)}return a.delete(e),a.delete(t),v}var ma=1,Pe="[object Arguments]",Le="[object Array]",B="[object Object]",va=Object.prototype,Oe=va.hasOwnProperty;function ga(e,t,n,r,o,a){var u=U(e),l=U(t),s=u?Le:Ce(e),i=l?Le:Ce(t);s=s==Pe?B:s,i=i==Pe?B:i;var f=s==B,c=i==B,p=s==i;if(p&&re(e)){if(!re(t))return!1;u=!0,f=!1}if(p&&!f)return a||(a=new M),u||Ye(e)?Je(e,t,n,r,o,a):ca(e,t,s,n,r,o,a);if(!(n&ma)){var y=f&&Oe.call(e,"__wrapped__"),m=c&&Oe.call(t,"__wrapped__");if(y||m){var v=y?e.value():e,h=m?t.value():t;return a||(a=new M),o(v,h,n,r,a)}}return p?(a||(a=new M),ya(e,t,n,r,o,a)):!1}function Qe(e,t,n,r,o){return e===t?!0:e==null||t==null||!$(e)&&!$(t)?e!==e&&t!==t:ga(e,t,n,r,Qe,o)}function ha(e,t){return Qe(e,t)}const ba=e=>e[0].toUpperCase()+e.slice(1,e.length);function et(e,t,{setterMap:n={},converterMap:r={}}={}){const o=Et(e);dt(()=>{t&&u(e,!0)},[e]),ze(()=>{t&&"remove"in t&&t.remove()});const a=()=>{u(e,!1)},u=(l,s=!0)=>{if(t)try{Object.keys(l).forEach(i=>{if(Fe(e[i])&&/^on[A-Z]/.test(i))return;let f=!0;if(s&&(f=!ha(l[i],o==null?void 0:o[i])),!f)return;let c=l[i];if(i in r&&(c=r[i](l[i])),i in n)n[i](c,t);else{const p=`set${ba(i)}`;p in t&&t[p](c)}})}catch(i){console.error(i)}};return{onInstanceCreated:a}}const Ea=["accessToken","antialias","attributionControl","bearingSnap","bounds","hash","interactive","clickTolerance","pitchWithRotate","customAttribution","cooperativeGestures","logoPosition","failIfMajorPerformanceCaveat","preserveDrawingBuffer","refreshExpiredTiles","trackResize","fitBoundsOptions","maxTileCacheSize","transformRequest","collectResourceTiming","fadeDuration","crossSourceCollisions","optimizeForTerrain","locale","localFontFamily","localIdeographFontFamily","testMode"],_a=["center","zoom","minZoom","maxZoom","style","maxBounds","dragPan","renderWorldCopies","pitch","maxPitch","minPitch","bearing","projection","touchPitch","boxZoom","scrollZoom","dragRotate","dragPan","keyboard","touchZoomRotate","doubleClickZoom"],Sa=_a.concat(Ea),Ma={touchPitch(e,t){if(t){if(e){t.touchPitch.enable();return}t.touchPitch.disable()}},scrollZoom(e,t){if(t){if(e){t.scrollZoom.enable();return}t.scrollZoom.disable()}},boxZoom(e,t){if(t){if(e){t.boxZoom.enable();return}t.boxZoom.disable()}},dragRotate(e,t){if(t){if(e){t.dragRotate.enable();return}t.dragRotate.disable()}},dragPan(e,t){if(t){if(e){t.dragPan.enable();return}t.dragPan.disable()}},keyboard(e,t){if(t){if(e){t.keyboard.enable();return}t.keyboard.disable()}},touchZoomRotate(e,t){if(t){if(e){t.touchZoomRotate.enable();return}t.touchZoomRotate.disable()}},doubleClickZoom(e,t){if(t){if(e){t.doubleClickZoom.enable();return}t.doubleClickZoom.disable()}}},Ta={},tt={onError:"error",onLoad:"load",onIdle:"idle",onRemove:"remove",onRender:"render",onResize:"resize",onWebglContextLost:"webglcontextlost",onWebglContextRestored:"webglcontextrestored",onDataloading:"dataloading",onData:"data",onTileDataLoading:"tiledataloading",onSourceDataLoading:"sourcedataloading",onStyleDataLoading:"styledataloading",onStyleLoad:"style.load",onStyleImportLoad:"style.import.load",onSourceData:"sourcedata",onStyleData:"styledata",onBoxZoomCancel:"boxzoomcancel",onBoxZoomStart:"boxzoomstart",onBoxZoomEnd:"boxzoomend",onTouchCancel:"touchcancel",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchStart:"touchstart",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onMouseMove:"mousemove",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMoveStart:"movestart",onMove:"move",onMoveEnd:"moveend",onZoomStart:"zoomstart",onZoom:"zoom",onZoomEnd:"zoomend",onRotateStart:"rotatestart",onRotate:"rotate",onRotateEnd:"rotateend",onDragStart:"dragstart",onDrag:"drag",onDragEnd:"dragend",onPitchStart:"pitchstart",onPitch:"pitch",onPitchEnd:"pitchend",onWheel:"wheel"},Aa=Object.keys(tt),Re=d.forwardRef((e,t)=>{const{className:n,loading:r,containerStyle:o,children:a}=e,u=d.useRef(null),[l,s]=d.useState(),i=d.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.containerStyle}),[e.style]),{current:f}=d.useRef({}),{onInstanceCreated:c}=et(e,l,{setterMap:Ma,converterMap:Ta});Be(l,e,{eventMap:tt,eventList:Aa}),d.useImperativeHandle(t,()=>l,[l]),d.useEffect(()=>{u.current&&p().then(v=>{c(),f.map=v,s(v)})},[u]);const p=()=>{const v=y(e);return Promise.resolve(new ie.Map(v))},y=v=>{const E={container:u.current};return Sa.forEach(b=>{b in v&&b!=="container"&&(E[b]=v[b])}),E},m={height:"100%"};return rt("div",{ref:u,style:i,className:n,children:[!l&&r,l&&Z(Ve.Provider,{value:f,children:Z("div",{"mapboxgl-children":"",style:m,children:a})})]})});try{Re.displayName="Map",Re.__docgenInfo={description:"",displayName:"Map",props:{loading:{defaultValue:null,description:"地图加载前的加载效果",name:"loading",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"额外的样式类",name:"className",required:!1,type:{name:"string"}},containerStyle:{defaultValue:null,description:"地图挂载节点样式",name:"containerStyle",required:!1,type:{name:"CSSProperties"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"((e: ErrorEvent) => void)"}},onLoad:{defaultValue:null,description:`下载所有必要的资源并且第一次视觉上完整渲染发生后触发
@param e
@returns`,name:"onLoad",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onIdle:{defaultValue:null,description:"",name:"onIdle",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onRender:{defaultValue:null,description:"",name:"onRender",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onResize:{defaultValue:null,description:"",name:"onResize",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onWebglContextLost:{defaultValue:null,description:"",name:"onWebglContextLost",required:!1,type:{name:"((e: MapContextEvent) => void)"}},onWebglContextRestored:{defaultValue:null,description:"",name:"onWebglContextRestored",required:!1,type:{name:"((e: MapContextEvent) => void)"}},onDataloading:{defaultValue:null,description:"",name:"onDataloading",required:!1,type:{name:"((e: MapDataEvent) => void)"}},onData:{defaultValue:null,description:"",name:"onData",required:!1,type:{name:"((e: MapDataEvent) => void)"}},onTileDataLoading:{defaultValue:null,description:"",name:"onTileDataLoading",required:!1,type:{name:"((e: MapDataEvent) => void)"}},onSourceDataLoading:{defaultValue:null,description:"",name:"onSourceDataLoading",required:!1,type:{name:"((e: MapSourceDataEvent) => void)"}},onStyleDataLoading:{defaultValue:null,description:"",name:"onStyleDataLoading",required:!1,type:{name:"((e: MapStyleDataEvent) => void)"}},onStyleLoad:{defaultValue:null,description:"",name:"onStyleLoad",required:!1,type:{name:'((e: Omit<MapStyleDataEvent, "dataType"> & { type: "style.load"; }) => void)'}},onStyleImportLoad:{defaultValue:null,description:"",name:"onStyleImportLoad",required:!1,type:{name:'((e: Omit<MapStyleDataEvent, "dataType"> & { type: "style.import.load"; }) => void)'}},onSourceData:{defaultValue:null,description:"",name:"onSourceData",required:!1,type:{name:"((e: MapSourceDataEvent) => void)"}},onStyleData:{defaultValue:null,description:"",name:"onStyleData",required:!1,type:{name:"((e: MapStyleDataEvent) => void)"}},onBoxZoomCancel:{defaultValue:null,description:"",name:"onBoxZoomCancel",required:!1,type:{name:"((e: MapBoxZoomEvent) => void)"}},onBoxZoomStart:{defaultValue:null,description:"",name:"onBoxZoomStart",required:!1,type:{name:"((e: MapBoxZoomEvent) => void)"}},onBoxZoomEnd:{defaultValue:null,description:"",name:"onBoxZoomEnd",required:!1,type:{name:"((e: MapBoxZoomEvent) => void)"}},onTouchCancel:{defaultValue:null,description:"",name:"onTouchCancel",required:!1,type:{name:"((e: MapTouchEvent) => void)"}},onTouchMove:{defaultValue:null,description:"",name:"onTouchMove",required:!1,type:{name:"((e: MapTouchEvent) => void)"}},onTouchEnd:{defaultValue:null,description:"",name:"onTouchEnd",required:!1,type:{name:"((e: MapTouchEvent) => void)"}},onTouchStart:{defaultValue:null,description:"",name:"onTouchStart",required:!1,type:{name:"((e: MapTouchEvent) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onContextMenu:{defaultValue:null,description:"",name:"onContextMenu",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseMove:{defaultValue:null,description:"",name:"onMouseMove",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseOut:{defaultValue:null,description:"",name:"onMouseOut",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseOver:{defaultValue:null,description:"",name:"onMouseOver",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMoveStart:{defaultValue:null,description:"",name:"onMoveStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onMove:{defaultValue:null,description:"",name:"onMove",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onMoveEnd:{defaultValue:null,description:"",name:"onMoveEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onZoomStart:{defaultValue:null,description:"",name:"onZoomStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onZoom:{defaultValue:null,description:"",name:"onZoom",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onZoomEnd:{defaultValue:null,description:"",name:"onZoomEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onRotateStart:{defaultValue:null,description:"",name:"onRotateStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onRotate:{defaultValue:null,description:"",name:"onRotate",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onRotateEnd:{defaultValue:null,description:"",name:"onRotateEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onDrag:{defaultValue:null,description:"",name:"onDrag",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onPitchStart:{defaultValue:null,description:"",name:"onPitchStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onPitch:{defaultValue:null,description:"",name:"onPitch",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onPitchEnd:{defaultValue:null,description:"",name:"onPitchEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onWheel:{defaultValue:null,description:"",name:"onWheel",required:!1,type:{name:"((e: MapWheelEvent) => void)"}}}}}catch{}const K=()=>{const e=d.useContext(Ve);if(!e)throw new Error("The useMap must be used in the Map container");return e},wa=e=>{if(!e)return null;if("toBounds"in e)return e;let t=0,n=0;return Array.isArray(e)?(t=e[0],n=e[1]):"lng"in e&&"lat"in e?(t=e.lng,n=e.lat):"lon"in e&&"lat"in e&&(t=e.lon,n=e.lat),t!==0&&n!==0?new ie.LngLat(t,n):null},Ca=["anchor","clickTolerance","color","scale"],xa=["offset","draggable","rotation","rotationAlignment","pitchAlignment","occludedOpacity","lngLat"],Da=xa.concat(Ca),Pa={},O={lngLat:wa},nt={onDragStart:"dragstart",onDrag:"drag",onDragEnd:"dragend"},La=Object.keys(nt),$e=d.forwardRef((e,t)=>{const{map:n}=K(),{Portal:r,container:o}=At(),[a,u,l]=ht(),{onInstanceCreated:s}=et(e,a,{setterMap:Pa,converterMap:O});Be(a,e,{eventMap:nt,eventList:La}),d.useImperativeHandle(t,()=>a,[a]);const i=y=>{var m;(m=e.onClick)==null||m.call(e,{type:"click",target:l(),originalEvent:y})};d.useEffect(()=>(n&&f().then(y=>{u(y),y.addTo(n),o.addEventListener("click",i),s()}),()=>{o&&o.removeEventListener("click",i)}),[n]);const f=()=>{const y=c(e);if(y.lngLat){const m=new ie.Marker(o,y);return m.setLngLat(y.lngLat),Promise.resolve(m)}else return Promise.reject()},c=y=>{const m={};return Da.forEach(v=>{v in y&&(m[v]=p(v,y))}),m},p=(y,m)=>{var h;let v=m[y];if(y in O)try{v=(h=O[y])==null?void 0:h.call(O,m[y])}catch{}return v};return Z(at,{children:a&&Z(r,{children:e.children})})});try{$e.displayName="Marker",$e.__docgenInfo={description:"",displayName:"Marker",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},lngLat:{defaultValue:null,description:"经纬度坐标",name:"lngLat",required:!1,type:{name:"LngLatLike"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"((e: MarkerEvent<MouseEvent | TouchEvent>) => void)"}},onDrag:{defaultValue:null,description:"",name:"onDrag",required:!1,type:{name:"((e: MarkerEvent<MouseEvent | TouchEvent>) => void)"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: MarkerEvent<MouseEvent | TouchEvent>) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e: MarkerEvent<Event>) => void)"}}}}}catch{}const je=e=>{const{isFinishRender:t=!1,children:n}=e,{map:r}=K(),[,o]=d.useState(0),a=d.useRef([0,0,0]),u=d.useRef(0),l=()=>{o(p=>p+1)},s=()=>["031","131"].includes(a.current.join("")),i=()=>{a.current=[1,0,0],l()},f=()=>{a.current[1]=a.current[1]+1,a.current[1]===3&&(u.current=u.current+1),s()&&l()},c=()=>{a.current[2]=1};return d.useEffect(()=>{if(r)return r.on("styledataloading",i),r.on("styledata",f),r.on("style.load",c),()=>{r.off("styledataloading",i),r.off("styledata",f),r.off("style.load",c)}},[r]),Fe(n)?n(s(),u.current===1):t?s()&&e.children:u.current>0&&e.children};try{je.displayName="StyleLoadFinish",je.__docgenInfo={description:"",displayName:"StyleLoadFinish",props:{isFinishRender:{defaultValue:{value:"false 加载中不卸载子组件"},description:"样式加载完成子组件才可渲染，加载中卸载子组件",name:"isFinishRender",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"子组件，如果为",name:"children",required:!1,type:{name:"ReactNode | ChildrenFun"}}}}}catch{}const I=e=>e.style&&e.style._loaded;function G(e,t){if(!e)throw new Error(t)}function x(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!x(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!t.hasOwnProperty(o)||!x(e[o],t[o]))return!1;return!0}return!1}function Oa(e,t,n){if(I(e)){const r={...n};return delete r.id,delete r.children,e.addSource(t,r),e.getSource(t)}}function Ra(e,t,n){G(t.id===n.id,"source id changed"),G(t.type===n.type,"source type changed");let r="",o=0;for(const u in t)u!=="children"&&u!=="id"&&!x(n[u],t[u])&&(r=u,o++);if(!o)return;const a=t.type;if(a==="geojson")e.setData(t.data);else if(a==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&o===1&&r==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(r){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${r}`)}let $a=0;function qe(e){const{map:t}=K(),n=d.useRef(e),[,r]=d.useState(0),o=d.useMemo(()=>e.id||`jsx-source-${$a++}`,[]);d.useEffect(()=>{if(t){const u=()=>setTimeout(()=>r(l=>l+1),0);return t.on("styledata",u),u(),()=>{var l;if(t.off("styledata",u),t.getStyle()&&I(t)&&t.getSource(o)){const s=(l=t.getStyle())==null?void 0:l.layers;if(s)for(const i of s)i.source===o&&t.removeLayer(i.id);t.removeSource(o)}}}},[t]);let a=t&&t.getStyle()&&t.getSource(o);return a?Ra(a,e,n.current):a=Oa(t,o,e),n.current=e,a&&ot.Children.map(e.children,u=>u&&d.cloneElement(u,{source:o}))||null}try{qe.displayName="Source",qe.__docgenInfo={description:"",displayName:"Source",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"custom"'},{value:'"geojson"'},{value:'"video"'},{value:'"image"'},{value:'"canvas"'},{value:'"vector"'},{value:'"raster"'},{value:'"raster-dem"'}]}},scheme:{defaultValue:null,description:"",name:"scheme",required:!1,type:{name:"string"}},minzoom:{defaultValue:null,description:"",name:"minzoom",required:!1,type:{name:"number"}},maxzoom:{defaultValue:null,description:"",name:"maxzoom",required:!1,type:{name:"number"}},tileSize:{defaultValue:null,description:"",name:"tileSize",required:!1,type:{name:"number"}},attribution:{defaultValue:null,description:"",name:"attribution",required:!1,type:{name:"string"}},_implementation:{defaultValue:null,description:"",name:"_implementation",required:!0,type:{name:"CustomSourceImplementation<unknown>"}}}}}catch{}function ja(e,t,n){if(I(e)&&(!("source"in n)||e.getSource(n.source))){const r={...n,id:t};delete r.beforeId,e.addLayer(r,n.beforeId)}}function qa(e,t,n,r){if(G(n.id===r.id,"layer id changed"),G(n.type===r.type,"layer type changed"),n.type==="custom"||r.type==="custom")return;const{layout:o={},paint:a={},filter:u,minzoom:l,maxzoom:s,beforeId:i}=n;if(i!==r.beforeId&&e.moveLayer(t,i),o!==r.layout){const f=r.layout||{};for(const c in o)x(o[c],f[c])||e.setLayoutProperty(t,c,o[c]);for(const c in f)o.hasOwnProperty(c)||e.setLayoutProperty(t,c,void 0)}if(a!==r.paint){const f=r.paint||{};for(const c in a)x(a[c],f[c])||e.setPaintProperty(t,c,a[c]);for(const c in f)a.hasOwnProperty(c)||e.setPaintProperty(t,c,void 0)}x(u,r.filter)||e.setFilter(t,u),(l!==r.minzoom||s!==r.maxzoom)&&e.setLayerZoomRange(t,l,s)}let Ia=0;const Ie=e=>{const{map:t}=K(),n=d.useRef(e),[,r]=d.useState(0),o=d.useMemo(()=>e.id||`jsx-layer-${Ia++}`,[]);if(d.useEffect(()=>{if(t){const u=()=>r(l=>l+1);return t.on("styledata",u),u(),()=>{t.off("styledata",u),I(t)&&t.getLayer(o)&&t.removeLayer(o)}}},[t]),I(t)&&t.getLayer(o))try{qa(t,o,e,n.current)}catch(u){console.warn(u)}else ja(t,o,e);return n.current=e,null};try{Ie.displayName="Layer",Ie.__docgenInfo={description:"",displayName:"Layer",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},minzoom:{defaultValue:null,description:"",name:"minzoom",required:!1,type:{name:"number"}},maxzoom:{defaultValue:null,description:"",name:"maxzoom",required:!1,type:{name:"number"}},filter:{defaultValue:null,description:"",name:"filter",required:!1,type:{name:"any"}},source:{defaultValue:null,description:"",name:"source",required:!1,type:{name:"unknown"}},metadata:{defaultValue:null,description:"",name:"metadata",required:!1,type:{name:"any"}},layout:{defaultValue:null,description:"",name:"layout",required:!1,type:{name:"{ [property: string]: any; }"}},paint:{defaultValue:null,description:"",name:"paint",required:!1,type:{name:"{ [property: string]: any; }"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},beforeId:{defaultValue:null,description:"",name:"beforeId",required:!1,type:{name:"string"}}}}}catch{}export{Ie as L,Re as M,je as S,$e as a,qe as b,K as u};
