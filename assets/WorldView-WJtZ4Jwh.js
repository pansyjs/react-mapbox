import{a as $t,j as $,F as dt}from"./jsx-runtime-5BUNAZ9W.js";import{M as Ce,m as It}from"./mapbox-gl-238DcKwu.js";import{r as g,R as Ft}from"./index-4g5l5LRQ.js";import{r as Oe}from"./index-im-bjvvC.js";const pt=g.createContext({});function qt(e){var t=g.useRef(e);return t.current=e,t}var jt=!!(typeof window<"u"&&window.document&&window.document.createElement),ce,fe;jt&&(!((ce=window)===null||ce===void 0||(fe=ce.navigator)===null||fe===void 0)&&fe.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);var ne=function(t){return typeof t=="function"};function re(e){"@babel/helpers - typeof";return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(e)}function Vt(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function o(a,u){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=r.has(a);if(i)return!1;if(a===u)return!0;if(n&&l>1)return!1;r.add(a);var s=l+1;if(Array.isArray(a)){if(!Array.isArray(u)||a.length!==u.length)return!1;for(var f=0;f<a.length;f++)if(!o(a[f],u[f],s))return!1;return!0}if(a&&u&&re(a)==="object"&&re(u)==="object"){var c=Object.keys(a);return c.length!==Object.keys(u).length?!1:c.every(function(d){return o(a[d],u[d],s)})}return!1}return o(e,t)}var Bt=function(){for(var t="",n=0;n<32;n++)switch(n){case 8:case 20:{t+="-".concat(Math.trunc(Math.random()*16).toString(16));break}case 12:{t+="-4";break}case 16:{t+="-".concat((Math.random()*16|0|8).toString(16));break}default:t+=Math.trunc(Math.random()*16).toString(16)}return t},Nt=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Vt(t,n)},Zt=function(t){return function(n,r){var o=g.useRef(),a=g.useRef(0);(r===void 0||!Nt(r,o.current))&&(o.current=r,a.current+=1),t(n,[a.current])}};function _e(e){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(e)}function ht(e){typeof e!="function"&&console.error("useUnmount expected parameter is a function, got ".concat(_e(e)));var t=qt(e);g.useEffect(function(){return function(){t.current()}},[])}var zt=Zt(g.useEffect);function Ut(e,t){return typeof e=="function"?e.length?e(t):e():e}function kt(e,t){return Kt(e)||Ht(e,t)||Gt(e,t)||Wt()}function Wt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gt(e,t){if(e){if(typeof e=="string")return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}}function Le(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ht(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,u,l=[],i=!0,s=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(f){s=!0,o=f}finally{try{if(!i&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return l}}function Kt(e){if(Array.isArray(e))return e}function Jt(e){var t=g.useState(e),n=kt(t,2),r=n[0],o=n[1],a=g.useRef(r);a.current=r;var u=g.useCallback(function(i){a.current=Ut(i,a.current),o(a.current)},[]),l=g.useCallback(function(){return a.current},[]);return[r,u,l]}var Yt=function(t,n){return t!==n};function Qt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yt,n=g.useRef(),r=g.useRef();return t(r.current,e)&&(n.current=r.current,r.current=e),n.current}function De(e,t){return nn(e)||tn(e,t)||en(e,t)||Xt()}function Xt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function en(e,t){if(e){if(typeof e=="string")return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(e,t)}}function Re(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tn(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,a=!1,u,l;try{for(n=n.call(e);!(o=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));o=!0);}catch(i){a=!0,l=i}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function nn(e){if(Array.isArray(e))return e}var rn=function(){var t=g.useState(function(){return document.createElement("div")}),n=De(t,1),r=n[0],o=g.useState({render:function(){return null},remove:function(){return null}}),a=De(o,2),u=a[0],l=a[1],i=g.useCallback(function(s){var f=function(h){var p=h.children;return p?Oe.createPortal(p,s):null},c=function(h){h&&Oe.unmountComponentAtNode(h)};return{render:f,remove:c}},[]);return g.useEffect(function(){r&&u.remove();var s=i(r);return l(s),function(){s.remove(r)}},[r]),{Portal:u.render,container:r}};const an=(e,t)=>e?e.map((n,r)=>Object.is(e[r],t==null?void 0:t[r])?-1:r).filter(n=>n>=0):t?t.map((n,r)=>r):[],on=(e,t)=>{const n=g.useRef();g.useEffect(()=>{const r=an(n.current,t),o=n.current;return n.current=t,e(r,o,t)},t)},yt=(e,t,n)=>{const{eventMap:r={},eventList:o=[]}=n;on((a=[],u,l)=>{if(!e)return;let i=a.filter(s=>!!s).map(s=>s-1);a.includes(0)&&(i=o.map((s,f)=>f)),i.forEach(s=>{const f=r[o[s]],c=u==null?void 0:u[s+1],d=l==null?void 0:l[s+1];c&&e.off(f,c),d&&e.on(f,d)})},[e,...o.map(a=>t[a])]),ht(()=>{e&&o.forEach(a=>{const u=r[a],l=t[a];u&&l&&e.off(u,l)})})};var mt=typeof global=="object"&&global&&global.Object===Object&&global,un=typeof self=="object"&&self&&self.Object===Object&&self,A=mt||un||Function("return this")(),V=A.Symbol,gt=Object.prototype,sn=gt.hasOwnProperty,ln=gt.toString,U=V?V.toStringTag:void 0;function cn(e){var t=sn.call(e,U),n=e[U];try{e[U]=void 0;var r=!0}catch{}var o=ln.call(e);return r&&(t?e[U]=n:delete e[U]),o}var fn=Object.prototype,dn=fn.toString;function pn(e){return dn.call(e)}var hn="[object Null]",yn="[object Undefined]",$e=V?V.toStringTag:void 0;function N(e){return e==null?e===void 0?yn:hn:$e&&$e in Object(e)?cn(e):pn(e)}function B(e){return e!=null&&typeof e=="object"}var mn="[object Symbol]";function gn(e){return typeof e=="symbol"||B(e)&&N(e)==mn}var ae=Array.isArray,vn=/\s/;function _n(e){for(var t=e.length;t--&&vn.test(e.charAt(t)););return t}var bn=/^\s+/;function En(e){return e&&e.slice(0,_n(e)+1).replace(bn,"")}function K(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ie=NaN,Mn=/^[-+]0x[0-9a-f]+$/i,Sn=/^0b[01]+$/i,wn=/^0o[0-7]+$/i,Tn=parseInt;function Fe(e){if(typeof e=="number")return e;if(gn(e))return Ie;if(K(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=K(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=En(e);var n=Sn.test(e);return n||wn.test(e)?Tn(e.slice(2),n?2:8):Mn.test(e)?Ie:+e}var An="[object AsyncFunction]",Cn="[object Function]",Pn="[object GeneratorFunction]",xn="[object Proxy]";function vt(e){if(!K(e))return!1;var t=N(e);return t==Cn||t==Pn||t==An||t==xn}var de=A["__core-js_shared__"],qe=function(){var e=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function On(e){return!!qe&&qe in e}var Ln=Function.prototype,Dn=Ln.toString;function F(e){if(e!=null){try{return Dn.call(e)}catch{}try{return e+""}catch{}}return""}var Rn=/[\\^$.*+?()[\]{}|]/g,$n=/^\[object .+?Constructor\]$/,In=Function.prototype,Fn=Object.prototype,qn=In.toString,jn=Fn.hasOwnProperty,Vn=RegExp("^"+qn.call(jn).replace(Rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bn(e){if(!K(e)||On(e))return!1;var t=vt(e)?Vn:$n;return t.test(F(e))}function Nn(e,t){return e==null?void 0:e[t]}function Z(e,t){var n=Nn(e,t);return Bn(n)?n:void 0}var be=Z(A,"WeakMap"),Zn=9007199254740991,zn=/^(?:0|[1-9]\d*)$/;function Un(e,t){var n=typeof e;return t=t??Zn,!!t&&(n=="number"||n!="symbol"&&zn.test(e))&&e>-1&&e%1==0&&e<t}function _t(e,t){return e===t||e!==e&&t!==t}var kn=9007199254740991;function bt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kn}function Wn(e){return e!=null&&bt(e.length)&&!vt(e)}var Gn=Object.prototype;function Hn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Gn;return e===n}function Kn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Jn="[object Arguments]";function je(e){return B(e)&&N(e)==Jn}var Et=Object.prototype,Yn=Et.hasOwnProperty,Qn=Et.propertyIsEnumerable,Xn=je(function(){return arguments}())?je:function(e){return B(e)&&Yn.call(e,"callee")&&!Qn.call(e,"callee")};function er(){return!1}var Mt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ve=Mt&&typeof module=="object"&&module&&!module.nodeType&&module,tr=Ve&&Ve.exports===Mt,Be=tr?A.Buffer:void 0,nr=Be?Be.isBuffer:void 0,Ee=nr||er,rr="[object Arguments]",ar="[object Array]",or="[object Boolean]",ir="[object Date]",ur="[object Error]",sr="[object Function]",lr="[object Map]",cr="[object Number]",fr="[object Object]",dr="[object RegExp]",pr="[object Set]",hr="[object String]",yr="[object WeakMap]",mr="[object ArrayBuffer]",gr="[object DataView]",vr="[object Float32Array]",_r="[object Float64Array]",br="[object Int8Array]",Er="[object Int16Array]",Mr="[object Int32Array]",Sr="[object Uint8Array]",wr="[object Uint8ClampedArray]",Tr="[object Uint16Array]",Ar="[object Uint32Array]",E={};E[vr]=E[_r]=E[br]=E[Er]=E[Mr]=E[Sr]=E[wr]=E[Tr]=E[Ar]=!0;E[rr]=E[ar]=E[mr]=E[or]=E[gr]=E[ir]=E[ur]=E[sr]=E[lr]=E[cr]=E[fr]=E[dr]=E[pr]=E[hr]=E[yr]=!1;function Cr(e){return B(e)&&bt(e.length)&&!!E[N(e)]}function Pr(e){return function(t){return e(t)}}var St=typeof exports=="object"&&exports&&!exports.nodeType&&exports,H=St&&typeof module=="object"&&module&&!module.nodeType&&module,xr=H&&H.exports===St,pe=xr&&mt.process,Ne=function(){try{var e=H&&H.require&&H.require("util").types;return e||pe&&pe.binding&&pe.binding("util")}catch{}}(),Ze=Ne&&Ne.isTypedArray,wt=Ze?Pr(Ze):Cr,Or=Object.prototype,Lr=Or.hasOwnProperty;function Dr(e,t){var n=ae(e),r=!n&&Xn(e),o=!n&&!r&&Ee(e),a=!n&&!r&&!o&&wt(e),u=n||r||o||a,l=u?Kn(e.length,String):[],i=l.length;for(var s in e)(t||Lr.call(e,s))&&!(u&&(s=="length"||o&&(s=="offset"||s=="parent")||a&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||Un(s,i)))&&l.push(s);return l}function Rr(e,t){return function(n){return e(t(n))}}var $r=Rr(Object.keys,Object),Ir=Object.prototype,Fr=Ir.hasOwnProperty;function qr(e){if(!Hn(e))return $r(e);var t=[];for(var n in Object(e))Fr.call(e,n)&&n!="constructor"&&t.push(n);return t}function jr(e){return Wn(e)?Dr(e):qr(e)}var J=Z(Object,"create");function Vr(){this.__data__=J?J(null):{},this.size=0}function Br(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Nr="__lodash_hash_undefined__",Zr=Object.prototype,zr=Zr.hasOwnProperty;function Ur(e){var t=this.__data__;if(J){var n=t[e];return n===Nr?void 0:n}return zr.call(t,e)?t[e]:void 0}var kr=Object.prototype,Wr=kr.hasOwnProperty;function Gr(e){var t=this.__data__;return J?t[e]!==void 0:Wr.call(t,e)}var Hr="__lodash_hash_undefined__";function Kr(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=J&&t===void 0?Hr:t,this}function I(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}I.prototype.clear=Vr;I.prototype.delete=Br;I.prototype.get=Ur;I.prototype.has=Gr;I.prototype.set=Kr;function Jr(){this.__data__=[],this.size=0}function se(e,t){for(var n=e.length;n--;)if(_t(e[n][0],t))return n;return-1}var Yr=Array.prototype,Qr=Yr.splice;function Xr(e){var t=this.__data__,n=se(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Qr.call(t,n,1),--this.size,!0}function ea(e){var t=this.__data__,n=se(t,e);return n<0?void 0:t[n][1]}function ta(e){return se(this.__data__,e)>-1}function na(e,t){var n=this.__data__,r=se(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function C(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}C.prototype.clear=Jr;C.prototype.delete=Xr;C.prototype.get=ea;C.prototype.has=ta;C.prototype.set=na;var Y=Z(A,"Map");function ra(){this.size=0,this.__data__={hash:new I,map:new(Y||C),string:new I}}function aa(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function le(e,t){var n=e.__data__;return aa(t)?n[typeof t=="string"?"string":"hash"]:n.map}function oa(e){var t=le(this,e).delete(e);return this.size-=t?1:0,t}function ia(e){return le(this,e).get(e)}function ua(e){return le(this,e).has(e)}function sa(e,t){var n=le(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function q(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}q.prototype.clear=ra;q.prototype.delete=oa;q.prototype.get=ia;q.prototype.has=ua;q.prototype.set=sa;function la(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function ca(){this.__data__=new C,this.size=0}function fa(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function da(e){return this.__data__.get(e)}function pa(e){return this.__data__.has(e)}var ha=200;function ya(e,t){var n=this.__data__;if(n instanceof C){var r=n.__data__;if(!Y||r.length<ha-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new q(r)}return n.set(e,t),this.size=n.size,this}function L(e){var t=this.__data__=new C(e);this.size=t.size}L.prototype.clear=ca;L.prototype.delete=fa;L.prototype.get=da;L.prototype.has=pa;L.prototype.set=ya;function ma(e,t){for(var n=-1,r=e==null?0:e.length,o=0,a=[];++n<r;){var u=e[n];t(u,n,e)&&(a[o++]=u)}return a}function ga(){return[]}var va=Object.prototype,_a=va.propertyIsEnumerable,ze=Object.getOwnPropertySymbols,ba=ze?function(e){return e==null?[]:(e=Object(e),ma(ze(e),function(t){return _a.call(e,t)}))}:ga;const Ea=ba;function Ma(e,t,n){var r=t(e);return ae(e)?r:la(r,n(e))}function Ue(e){return Ma(e,jr,Ea)}var Me=Z(A,"DataView"),Se=Z(A,"Promise"),we=Z(A,"Set"),ke="[object Map]",Sa="[object Object]",We="[object Promise]",Ge="[object Set]",He="[object WeakMap]",Ke="[object DataView]",wa=F(Me),Ta=F(Y),Aa=F(Se),Ca=F(we),Pa=F(be),R=N;(Me&&R(new Me(new ArrayBuffer(1)))!=Ke||Y&&R(new Y)!=ke||Se&&R(Se.resolve())!=We||we&&R(new we)!=Ge||be&&R(new be)!=He)&&(R=function(e){var t=N(e),n=t==Sa?e.constructor:void 0,r=n?F(n):"";if(r)switch(r){case wa:return Ke;case Ta:return ke;case Aa:return We;case Ca:return Ge;case Pa:return He}return t});const Je=R;var xa=A.Uint8Array;const Ye=xa;var Oa="__lodash_hash_undefined__";function La(e){return this.__data__.set(e,Oa),this}function Da(e){return this.__data__.has(e)}function oe(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new q;++t<n;)this.add(e[t])}oe.prototype.add=oe.prototype.push=La;oe.prototype.has=Da;function Ra(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function $a(e,t){return e.has(t)}var Ia=1,Fa=2;function Tt(e,t,n,r,o,a){var u=n&Ia,l=e.length,i=t.length;if(l!=i&&!(u&&i>l))return!1;var s=a.get(e),f=a.get(t);if(s&&f)return s==t&&f==e;var c=-1,d=!0,h=n&Fa?new oe:void 0;for(a.set(e,t),a.set(t,e);++c<l;){var p=e[c],m=t[c];if(r)var v=u?r(m,p,c,t,e,a):r(p,m,c,e,t,a);if(v!==void 0){if(v)continue;d=!1;break}if(h){if(!Ra(t,function(y,_){if(!$a(h,_)&&(p===y||o(p,y,n,r,a)))return h.push(_)})){d=!1;break}}else if(!(p===m||o(p,m,n,r,a))){d=!1;break}}return a.delete(e),a.delete(t),d}function qa(e){var t=-1,n=Array(e.size);return e.forEach(function(r,o){n[++t]=[o,r]}),n}function ja(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Va=1,Ba=2,Na="[object Boolean]",Za="[object Date]",za="[object Error]",Ua="[object Map]",ka="[object Number]",Wa="[object RegExp]",Ga="[object Set]",Ha="[object String]",Ka="[object Symbol]",Ja="[object ArrayBuffer]",Ya="[object DataView]",Qe=V?V.prototype:void 0,he=Qe?Qe.valueOf:void 0;function Qa(e,t,n,r,o,a,u){switch(n){case Ya:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ja:return!(e.byteLength!=t.byteLength||!a(new Ye(e),new Ye(t)));case Na:case Za:case ka:return _t(+e,+t);case za:return e.name==t.name&&e.message==t.message;case Wa:case Ha:return e==t+"";case Ua:var l=qa;case Ga:var i=r&Va;if(l||(l=ja),e.size!=t.size&&!i)return!1;var s=u.get(e);if(s)return s==t;r|=Ba,u.set(e,t);var f=Tt(l(e),l(t),r,o,a,u);return u.delete(e),f;case Ka:if(he)return he.call(e)==he.call(t)}return!1}var Xa=1,eo=Object.prototype,to=eo.hasOwnProperty;function no(e,t,n,r,o,a){var u=n&Xa,l=Ue(e),i=l.length,s=Ue(t),f=s.length;if(i!=f&&!u)return!1;for(var c=i;c--;){var d=l[c];if(!(u?d in t:to.call(t,d)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var v=u;++c<i;){d=l[c];var y=e[d],_=t[d];if(r)var b=u?r(_,y,d,t,e,a):r(y,_,d,e,t,a);if(!(b===void 0?y===_||o(y,_,n,r,a):b)){m=!1;break}v||(v=d=="constructor")}if(m&&!v){var w=e.constructor,M=t.constructor;w!=M&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof M=="function"&&M instanceof M)&&(m=!1)}return a.delete(e),a.delete(t),m}var ro=1,Xe="[object Arguments]",et="[object Array]",X="[object Object]",ao=Object.prototype,tt=ao.hasOwnProperty;function oo(e,t,n,r,o,a){var u=ae(e),l=ae(t),i=u?et:Je(e),s=l?et:Je(t);i=i==Xe?X:i,s=s==Xe?X:s;var f=i==X,c=s==X,d=i==s;if(d&&Ee(e)){if(!Ee(t))return!1;u=!0,f=!1}if(d&&!f)return a||(a=new L),u||wt(e)?Tt(e,t,n,r,o,a):Qa(e,t,i,n,r,o,a);if(!(n&ro)){var h=f&&tt.call(e,"__wrapped__"),p=c&&tt.call(t,"__wrapped__");if(h||p){var m=h?e.value():e,v=p?t.value():t;return a||(a=new L),o(m,v,n,r,a)}}return d?(a||(a=new L),no(e,t,n,r,o,a)):!1}function At(e,t,n,r,o){return e===t?!0:e==null||t==null||!B(e)&&!B(t)?e!==e&&t!==t:oo(e,t,n,r,At,o)}var ye=function(){return A.Date.now()},io="Expected a function",uo=Math.max,so=Math.min;function lo(e,t,n){var r,o,a,u,l,i,s=0,f=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(io);t=Fe(t)||0,K(n)&&(f=!!n.leading,c="maxWait"in n,a=c?uo(Fe(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,P=o;return r=o=void 0,s=S,u=e.apply(P,T),u}function p(S){return s=S,l=setTimeout(y,t),f?h(S):u}function m(S){var T=S-i,P=S-s,xe=t-T;return c?so(xe,a-P):xe}function v(S){var T=S-i,P=S-s;return i===void 0||T>=t||T<0||c&&P>=a}function y(){var S=ye();if(v(S))return _(S);l=setTimeout(y,m(S))}function _(S){return l=void 0,d&&r?h(S):(r=o=void 0,u)}function b(){l!==void 0&&clearTimeout(l),s=0,r=i=o=l=void 0}function w(){return l===void 0?u:_(ye())}function M(){var S=ye(),T=v(S);if(r=arguments,o=this,i=S,T){if(l===void 0)return p(i);if(c)return clearTimeout(l),l=setTimeout(y,t),h(i)}return l===void 0&&(l=setTimeout(y,t)),u}return M.cancel=b,M.flush=w,M}function co(e,t){return At(e,t)}const fo=e=>e[0].toUpperCase()+e.slice(1,e.length);function Ct(e,t,{setterMap:n={},converterMap:r={}}={}){const o=Qt(e);zt(()=>{t&&u(e,!0)},[e]),ht(()=>{t&&"remove"in t&&t.remove()});const a=()=>{u(e,!1)},u=(l,i=!0)=>{if(t)try{Object.keys(l).forEach(s=>{if(ne(e[s])&&/^on[A-Z]/.test(s))return;let f=!0;if(i&&(f=!co(l[s],o==null?void 0:o[s])),!f)return;let c=l[s];if(s in r&&(c=r[s](l[s])),s in n)n[s](c,t);else{const d=`set${fo(s)}`;d in t&&t[d](c)}})}catch(s){console.error(s)}};return{onInstanceCreated:a}}const po=["accessToken","antialias","attributionControl","bearingSnap","bounds","hash","interactive","clickTolerance","pitchWithRotate","customAttribution","cooperativeGestures","logoPosition","failIfMajorPerformanceCaveat","preserveDrawingBuffer","refreshExpiredTiles","trackResize","fitBoundsOptions","maxTileCacheSize","transformRequest","collectResourceTiming","fadeDuration","crossSourceCollisions","optimizeForTerrain","locale","localFontFamily","localIdeographFontFamily","testMode"],ho=["center","zoom","minZoom","maxZoom","style","maxBounds","dragPan","renderWorldCopies","pitch","maxPitch","minPitch","bearing","projection","touchPitch","boxZoom","scrollZoom","dragRotate","dragPan","keyboard","touchZoomRotate","doubleClickZoom"],yo=ho.concat(po),mo={touchPitch(e,t){if(t){if(e){t.touchPitch.enable();return}t.touchPitch.disable()}},scrollZoom(e,t){if(t){if(e){t.scrollZoom.enable();return}t.scrollZoom.disable()}},boxZoom(e,t){if(t){if(e){t.boxZoom.enable();return}t.boxZoom.disable()}},dragRotate(e,t){if(t){if(e){t.dragRotate.enable();return}t.dragRotate.disable()}},dragPan(e,t){if(t){if(e){t.dragPan.enable();return}t.dragPan.disable()}},keyboard(e,t){if(t){if(e){t.keyboard.enable();return}t.keyboard.disable()}},touchZoomRotate(e,t){if(t){if(e){t.touchZoomRotate.enable();return}t.touchZoomRotate.disable()}},doubleClickZoom(e,t){if(t){if(e){t.doubleClickZoom.enable();return}t.doubleClickZoom.disable()}}},go={},Pt={onError:"error",onLoad:"load",onIdle:"idle",onRemove:"remove",onRender:"render",onResize:"resize",onWebglContextLost:"webglcontextlost",onWebglContextRestored:"webglcontextrestored",onDataloading:"dataloading",onData:"data",onTileDataLoading:"tiledataloading",onSourceDataLoading:"sourcedataloading",onStyleDataLoading:"styledataloading",onStyleLoad:"style.load",onStyleImportLoad:"style.import.load",onSourceData:"sourcedata",onStyleData:"styledata",onBoxZoomCancel:"boxzoomcancel",onBoxZoomStart:"boxzoomstart",onBoxZoomEnd:"boxzoomend",onTouchCancel:"touchcancel",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchStart:"touchstart",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onMouseMove:"mousemove",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMoveStart:"movestart",onMove:"move",onMoveEnd:"moveend",onZoomStart:"zoomstart",onZoom:"zoom",onZoomEnd:"zoomend",onRotateStart:"rotatestart",onRotate:"rotate",onRotateEnd:"rotateend",onDragStart:"dragstart",onDrag:"drag",onDragEnd:"dragend",onPitchStart:"pitchstart",onPitch:"pitch",onPitchEnd:"pitchend",onWheel:"wheel"},vo=Object.keys(Pt),nt=g.forwardRef((e,t)=>{const{className:n,loading:r,containerStyle:o,children:a}=e,u=g.useRef(null),[l,i]=g.useState(),s=g.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.containerStyle}),[e.style]),{current:f}=g.useRef({}),{onInstanceCreated:c}=Ct(e,l,{setterMap:mo,converterMap:go});yt(l,e,{eventMap:Pt,eventList:vo}),g.useImperativeHandle(t,()=>l,[l]),g.useEffect(()=>{u.current&&d().then(m=>{c(),f.map=m,i(m)})},[u]);const d=()=>{const m=h(e);return Promise.resolve(new Ce.Map(m))},h=m=>{const y={container:u.current};return yo.forEach(_=>{_ in m&&_!=="container"&&(y[_]=m[_])}),y},p={height:"100%"};return $t("div",{ref:u,style:s,className:n,children:[!l&&r,l&&$(pt.Provider,{value:f,children:$("div",{"mapboxgl-children":"",style:p,children:a})})]})});try{nt.displayName="Map",nt.__docgenInfo={description:"",displayName:"Map",props:{loading:{defaultValue:null,description:"地图加载前的加载效果",name:"loading",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"额外的样式类",name:"className",required:!1,type:{name:"string"}},containerStyle:{defaultValue:null,description:"地图挂载节点样式",name:"containerStyle",required:!1,type:{name:"CSSProperties"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"((e: ErrorEvent) => void)"}},onLoad:{defaultValue:null,description:`下载所有必要的资源并且第一次视觉上完整渲染发生后触发
@param e
@returns`,name:"onLoad",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onIdle:{defaultValue:null,description:"",name:"onIdle",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onRender:{defaultValue:null,description:"",name:"onRender",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onResize:{defaultValue:null,description:"",name:"onResize",required:!1,type:{name:"((e: MapboxEvent<undefined>) => void)"}},onWebglContextLost:{defaultValue:null,description:"",name:"onWebglContextLost",required:!1,type:{name:"((e: MapContextEvent) => void)"}},onWebglContextRestored:{defaultValue:null,description:"",name:"onWebglContextRestored",required:!1,type:{name:"((e: MapContextEvent) => void)"}},onDataloading:{defaultValue:null,description:"",name:"onDataloading",required:!1,type:{name:"((e: MapDataEvent) => void)"}},onData:{defaultValue:null,description:"",name:"onData",required:!1,type:{name:"((e: MapDataEvent) => void)"}},onTileDataLoading:{defaultValue:null,description:"",name:"onTileDataLoading",required:!1,type:{name:"((e: MapDataEvent) => void)"}},onSourceDataLoading:{defaultValue:null,description:"",name:"onSourceDataLoading",required:!1,type:{name:"((e: MapSourceDataEvent) => void)"}},onStyleDataLoading:{defaultValue:null,description:"",name:"onStyleDataLoading",required:!1,type:{name:"((e: MapStyleDataEvent) => void)"}},onStyleLoad:{defaultValue:null,description:"",name:"onStyleLoad",required:!1,type:{name:'((e: Omit<MapStyleDataEvent, "dataType"> & { type: "style.load"; }) => void)'}},onStyleImportLoad:{defaultValue:null,description:"",name:"onStyleImportLoad",required:!1,type:{name:'((e: Omit<MapStyleDataEvent, "dataType"> & { type: "style.import.load"; }) => void)'}},onSourceData:{defaultValue:null,description:"",name:"onSourceData",required:!1,type:{name:"((e: MapSourceDataEvent) => void)"}},onStyleData:{defaultValue:null,description:"",name:"onStyleData",required:!1,type:{name:"((e: MapStyleDataEvent) => void)"}},onBoxZoomCancel:{defaultValue:null,description:"",name:"onBoxZoomCancel",required:!1,type:{name:"((e: MapBoxZoomEvent) => void)"}},onBoxZoomStart:{defaultValue:null,description:"",name:"onBoxZoomStart",required:!1,type:{name:"((e: MapBoxZoomEvent) => void)"}},onBoxZoomEnd:{defaultValue:null,description:"",name:"onBoxZoomEnd",required:!1,type:{name:"((e: MapBoxZoomEvent) => void)"}},onTouchCancel:{defaultValue:null,description:"",name:"onTouchCancel",required:!1,type:{name:"((e: MapTouchEvent) => void)"}},onTouchMove:{defaultValue:null,description:"",name:"onTouchMove",required:!1,type:{name:"((e: MapTouchEvent) => void)"}},onTouchEnd:{defaultValue:null,description:"",name:"onTouchEnd",required:!1,type:{name:"((e: MapTouchEvent) => void)"}},onTouchStart:{defaultValue:null,description:"",name:"onTouchStart",required:!1,type:{name:"((e: MapTouchEvent) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onContextMenu:{defaultValue:null,description:"",name:"onContextMenu",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseMove:{defaultValue:null,description:"",name:"onMouseMove",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseOut:{defaultValue:null,description:"",name:"onMouseOut",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMouseOver:{defaultValue:null,description:"",name:"onMouseOver",required:!1,type:{name:"((e: MapMouseEvent) => void)"}},onMoveStart:{defaultValue:null,description:"",name:"onMoveStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onMove:{defaultValue:null,description:"",name:"onMove",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onMoveEnd:{defaultValue:null,description:"",name:"onMoveEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onZoomStart:{defaultValue:null,description:"",name:"onZoomStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onZoom:{defaultValue:null,description:"",name:"onZoom",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onZoomEnd:{defaultValue:null,description:"",name:"onZoomEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent | WheelEvent>) => void)"}},onRotateStart:{defaultValue:null,description:"",name:"onRotateStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onRotate:{defaultValue:null,description:"",name:"onRotate",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onRotateEnd:{defaultValue:null,description:"",name:"onRotateEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onDrag:{defaultValue:null,description:"",name:"onDrag",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onPitchStart:{defaultValue:null,description:"",name:"onPitchStart",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onPitch:{defaultValue:null,description:"",name:"onPitch",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onPitchEnd:{defaultValue:null,description:"",name:"onPitchEnd",required:!1,type:{name:"((e: MapboxEvent<MouseEvent | TouchEvent>) => void)"}},onWheel:{defaultValue:null,description:"",name:"onWheel",required:!1,type:{name:"((e: MapWheelEvent) => void)"}}}}}catch{}const z=()=>{const e=g.useContext(pt);if(!e)throw new Error("The useMap must be used in the Map container");return e},_o=e=>{if(!e)return null;if("toBounds"in e)return e;let t=0,n=0;return Array.isArray(e)?(t=e[0],n=e[1]):"lng"in e&&"lat"in e?(t=e.lng,n=e.lat):"lon"in e&&"lat"in e&&(t=e.lon,n=e.lat),t!==0&&n!==0?new Ce.LngLat(t,n):null},bo=["anchor","clickTolerance","color","scale"],Eo=["offset","draggable","rotation","rotationAlignment","pitchAlignment","occludedOpacity","lngLat"],Mo=Eo.concat(bo),So={},k={lngLat:_o},xt={onDragStart:"dragstart",onDrag:"drag",onDragEnd:"dragend"},wo=Object.keys(xt),ie=g.forwardRef((e,t)=>{const{map:n}=z(),{Portal:r,container:o}=rn(),[a,u,l]=Jt(),{onInstanceCreated:i}=Ct(e,a,{setterMap:So,converterMap:k});yt(a,e,{eventMap:xt,eventList:wo}),g.useImperativeHandle(t,()=>a,[a]);const s=p=>{var m;(m=e.onClick)==null||m.call(e,{type:"click",target:l(),originalEvent:p})},f=p=>{p.stopPropagation(),p.preventDefault()};g.useEffect(()=>(n&&c().then(p=>{u(p),p.addTo(n),o.addEventListener("click",s),o.addEventListener("dblclick",f),i()}),()=>{o&&(o.removeEventListener("click",s),o.removeEventListener("dblclick",s))}),[n]);const c=()=>{const p=d(e);if(p.lngLat){const m=new Ce.Marker(o,p);return m.setLngLat(p.lngLat),Promise.resolve(m)}else return Promise.reject()},d=p=>{const m={};return Mo.forEach(v=>{v in p&&(m[v]=h(v,p))}),m},h=(p,m)=>{var y;let v=m[p];if(p in k)try{v=(y=k[p])==null?void 0:y.call(k,m[p])}catch{}return v};return $(dt,{children:a&&$(r,{children:e.children})})});try{ie.displayName="Marker",ie.__docgenInfo={description:"",displayName:"Marker",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},lngLat:{defaultValue:null,description:"经纬度坐标",name:"lngLat",required:!1,type:{name:"LngLatLike"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"((e: MarkerEvent<MouseEvent | TouchEvent>) => void)"}},onDrag:{defaultValue:null,description:"",name:"onDrag",required:!1,type:{name:"((e: MarkerEvent<MouseEvent | TouchEvent>) => void)"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: MarkerEvent<MouseEvent | TouchEvent>) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e: MarkerEvent<Event>) => void)"}}}}}catch{}const rt=e=>{const{isFinishRender:t=!1,children:n}=e,{map:r}=z(),[,o]=g.useState(0),a=g.useRef([0,0,0]),u=g.useRef(0),l=()=>{o(d=>d+1)},i=()=>["031","131"].includes(a.current.join("")),s=()=>{a.current=[1,0,0],l()},f=()=>{a.current[1]=a.current[1]+1,a.current[1]===3&&(u.current=u.current+1),i()&&l()},c=()=>{a.current[2]=1};return g.useEffect(()=>{if(r)return r.on("styledataloading",s),r.on("styledata",f),r.on("style.load",c),()=>{r.off("styledataloading",s),r.off("styledata",f),r.off("style.load",c)}},[r]),ne(n)?n(i(),u.current===1):t?i()&&e.children:u.current>0&&e.children};try{rt.displayName="StyleLoadFinish",rt.__docgenInfo={description:"",displayName:"StyleLoadFinish",props:{isFinishRender:{defaultValue:{value:"false 加载中不卸载子组件"},description:"样式加载完成子组件才可渲染，加载中卸载子组件",name:"isFinishRender",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"子组件，如果为",name:"children",required:!1,type:{name:"ReactNode | ChildrenFun"}}}}}catch{}const Q=e=>e.style&&e.style._loaded;function ue(e,t){if(!e)throw new Error(t)}function j(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!j(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!t.hasOwnProperty(o)||!j(e[o],t[o]))return!1;return!0}return!1}function To(e,t,n){if(Q(e)){const r={...n};return delete r.id,delete r.children,e.addSource(t,r),e.getSource(t)}}function Ao(e,t,n){ue(t.id===n.id,"source id changed"),ue(t.type===n.type,"source type changed");let r="",o=0;for(const u in t)u!=="children"&&u!=="id"&&!j(n[u],t[u])&&(r=u,o++);if(!o)return;const a=t.type;if(a==="geojson")e.setData(t.data);else if(a==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&o===1&&r==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(r){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${r}`)}let Co=0;function at(e){const{map:t}=z(),n=g.useRef(e),[,r]=g.useState(0),o=g.useMemo(()=>e.id||`jsx-source-${Co++}`,[]);g.useEffect(()=>{if(t){const u=()=>setTimeout(()=>r(l=>l+1),0);return t.on("styledata",u),u(),()=>{var l;if(t.off("styledata",u),t.getStyle()&&Q(t)&&t.getSource(o)){const i=(l=t.getStyle())==null?void 0:l.layers;if(i)for(const s of i)s.source===o&&t.removeLayer(s.id);t.removeSource(o)}}}},[t]);let a=t&&t.getStyle()&&t.getSource(o);return a?Ao(a,e,n.current):a=To(t,o,e),n.current=e,a&&Ft.Children.map(e.children,u=>u&&g.cloneElement(u,{source:o}))||null}try{at.displayName="Source",at.__docgenInfo={description:"",displayName:"Source",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"custom"'},{value:'"geojson"'},{value:'"video"'},{value:'"image"'},{value:'"canvas"'},{value:'"vector"'},{value:'"raster"'},{value:'"raster-dem"'}]}},scheme:{defaultValue:null,description:"",name:"scheme",required:!1,type:{name:"string"}},minzoom:{defaultValue:null,description:"",name:"minzoom",required:!1,type:{name:"number"}},maxzoom:{defaultValue:null,description:"",name:"maxzoom",required:!1,type:{name:"number"}},tileSize:{defaultValue:null,description:"",name:"tileSize",required:!1,type:{name:"number"}},attribution:{defaultValue:null,description:"",name:"attribution",required:!1,type:{name:"string"}},_implementation:{defaultValue:null,description:"",name:"_implementation",required:!0,type:{name:"CustomSourceImplementation<unknown>"}}}}}catch{}function Po(e,t,n){if(Q(e)&&(!("source"in n)||e.getSource(n.source))){const r={...n,id:t};delete r.beforeId,e.addLayer(r,n.beforeId)}}function xo(e,t,n,r){if(ue(n.id===r.id,"layer id changed"),ue(n.type===r.type,"layer type changed"),n.type==="custom"||r.type==="custom")return;const{layout:o={},paint:a={},filter:u,minzoom:l,maxzoom:i,beforeId:s}=n;if(s!==r.beforeId&&e.moveLayer(t,s),o!==r.layout){const f=r.layout||{};for(const c in o)j(o[c],f[c])||e.setLayoutProperty(t,c,o[c]);for(const c in f)o.hasOwnProperty(c)||e.setLayoutProperty(t,c,void 0)}if(a!==r.paint){const f=r.paint||{};for(const c in a)j(a[c],f[c])||e.setPaintProperty(t,c,a[c]);for(const c in f)a.hasOwnProperty(c)||e.setPaintProperty(t,c,void 0)}j(u,r.filter)||e.setFilter(t,u),(l!==r.minzoom||i!==r.maxzoom)&&e.setLayerZoomRange(t,l,i)}let Oo=0;const ot=e=>{const{map:t}=z(),n=g.useRef(e),[,r]=g.useState(0),o=g.useMemo(()=>e.id||`jsx-layer-${Oo++}`,[]);if(g.useEffect(()=>{if(t){const u=()=>r(l=>l+1);return t.on("styledata",u),u(),()=>{t.off("styledata",u),Q(t)&&t.getLayer(o)&&t.removeLayer(o)}}},[t]),Q(t)&&t.getLayer(o))try{xo(t,o,e,n.current)}catch(u){console.warn(u)}else Po(t,o,e);return n.current=e,null};try{ot.displayName="Layer",ot.__docgenInfo={description:"",displayName:"Layer",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},source:{defaultValue:null,description:"",name:"source",required:!1,type:{name:"unknown"}},metadata:{defaultValue:null,description:"",name:"metadata",required:!1,type:{name:"any"}},minzoom:{defaultValue:null,description:"",name:"minzoom",required:!1,type:{name:"number"}},maxzoom:{defaultValue:null,description:"",name:"maxzoom",required:!1,type:{name:"number"}},filter:{defaultValue:null,description:"",name:"filter",required:!1,type:{name:"any"}},layout:{defaultValue:null,description:"",name:"layout",required:!1,type:{name:"{ [property: string]: any; }"}},paint:{defaultValue:null,description:"",name:"paint",required:!1,type:{name:"{ [property: string]: any; }"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},beforeId:{defaultValue:null,description:"",name:"beforeId",required:!1,type:{name:"string"}}}}}catch{}const it=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],me=1,W=8;class Pe{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,r]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const o=r>>4;if(o!==me)throw new Error(`Got v${o} data when expected v${me}.`);const a=it[r&15];if(!a)throw new Error("Unrecognized array type.");const[u]=new Uint16Array(t,2,1),[l]=new Uint32Array(t,4,1);return new Pe(l,u,a,t)}constructor(t,n=64,r=Float64Array,o){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const a=it.indexOf(this.ArrayType),u=t*2*this.ArrayType.BYTES_PER_ELEMENT,l=t*this.IndexArrayType.BYTES_PER_ELEMENT,i=(8-l%8)%8;if(a<0)throw new Error(`Unexpected typed array class: ${r}.`);o&&o instanceof ArrayBuffer?(this.data=o,this.ids=new this.IndexArrayType(this.data,W,t),this.coords=new this.ArrayType(this.data,W+l+i,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(W+u+l+i),this.ids=new this.IndexArrayType(this.data,W,t),this.coords=new this.ArrayType(this.data,W+l+i,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(me<<4)+a]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=t,this.coords[this._pos++]=n,r}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Te(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,r,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:a,coords:u,nodeSize:l}=this,i=[0,a.length-1,0],s=[];for(;i.length;){const f=i.pop()||0,c=i.pop()||0,d=i.pop()||0;if(c-d<=l){for(let v=d;v<=c;v++){const y=u[2*v],_=u[2*v+1];y>=t&&y<=r&&_>=n&&_<=o&&s.push(a[v])}continue}const h=d+c>>1,p=u[2*h],m=u[2*h+1];p>=t&&p<=r&&m>=n&&m<=o&&s.push(a[h]),(f===0?t<=p:n<=m)&&(i.push(d),i.push(h-1),i.push(1-f)),(f===0?r>=p:o>=m)&&(i.push(h+1),i.push(c),i.push(1-f))}return s}within(t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:a,nodeSize:u}=this,l=[0,o.length-1,0],i=[],s=r*r;for(;l.length;){const f=l.pop()||0,c=l.pop()||0,d=l.pop()||0;if(c-d<=u){for(let v=d;v<=c;v++)ut(a[2*v],a[2*v+1],t,n)<=s&&i.push(o[v]);continue}const h=d+c>>1,p=a[2*h],m=a[2*h+1];ut(p,m,t,n)<=s&&i.push(o[h]),(f===0?t-r<=p:n-r<=m)&&(l.push(d),l.push(h-1),l.push(1-f)),(f===0?t+r>=p:n+r>=m)&&(l.push(h+1),l.push(c),l.push(1-f))}return i}}function Te(e,t,n,r,o,a){if(o-r<=n)return;const u=r+o>>1;Ot(e,t,u,r,o,a),Te(e,t,n,r,u-1,1-a),Te(e,t,n,u+1,o,1-a)}function Ot(e,t,n,r,o,a){for(;o>r;){if(o-r>600){const s=o-r+1,f=n-r+1,c=Math.log(s),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(s-d)/s)*(f-s/2<0?-1:1),p=Math.max(r,Math.floor(n-f*d/s+h)),m=Math.min(o,Math.floor(n+(s-f)*d/s+h));Ot(e,t,n,p,m,a)}const u=t[2*n+a];let l=r,i=o;for(G(e,t,r,n),t[2*o+a]>u&&G(e,t,r,o);l<i;){for(G(e,t,l,i),l++,i--;t[2*l+a]<u;)l++;for(;t[2*i+a]>u;)i--}t[2*r+a]===u?G(e,t,r,i):(i++,G(e,t,i,o)),i<=n&&(r=i+1),n<=i&&(o=i-1)}}function G(e,t,n,r){ge(e,n,r),ge(t,2*n,2*r),ge(t,2*n+1,2*r+1)}function ge(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ut(e,t,n,r){const o=e-n,a=t-r;return o*o+a*a}const Lo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},st=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1)),D=2,O=3,ve=4,x=5,Lt=6;let Do=class{constructor(t){this.options=Object.assign(Object.create(Lo),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:n,minZoom:r,maxZoom:o}=this.options;n&&console.time("total time");const a=`prepare ${t.length} points`;n&&console.time(a),this.points=t;const u=[];for(let i=0;i<t.length;i++){const s=t[i];if(!s.geometry)continue;const[f,c]=s.geometry.coordinates,d=st(ee(f)),h=st(te(c));u.push(d,h,1/0,i,-1,1),this.options.reduce&&u.push(0)}let l=this.trees[o+1]=this._createTree(u);n&&console.timeEnd(a);for(let i=o;i>=r;i--){const s=+Date.now();l=this.trees[i]=this._createTree(this._cluster(l,i)),n&&console.log("z%d: %d clusters in %dms",i,l.numItems,+Date.now()-s)}return n&&console.timeEnd("total time"),this}getClusters(t,n){let r=((t[0]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[1]));let a=t[2]===180?180:((t[2]+180)%360+360)%360-180;const u=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)r=-180,a=180;else if(r>a){const c=this.getClusters([r,o,180,u],n),d=this.getClusters([-180,o,a,u],n);return c.concat(d)}const l=this.trees[this._limitZoom(n)],i=l.range(ee(r),te(u),ee(a),te(o)),s=l.data,f=[];for(const c of i){const d=this.stride*c;f.push(s[d+x]>1?lt(s,d,this.clusterProps):this.points[s[d+O]])}return f}getChildren(t){const n=this._getOriginId(t),r=this._getOriginZoom(t),o="No cluster with the specified id.",a=this.trees[r];if(!a)throw new Error(o);const u=a.data;if(n*this.stride>=u.length)throw new Error(o);const l=this.options.radius/(this.options.extent*Math.pow(2,r-1)),i=u[n*this.stride],s=u[n*this.stride+1],f=a.within(i,s,l),c=[];for(const d of f){const h=d*this.stride;u[h+ve]===t&&c.push(u[h+x]>1?lt(u,h,this.clusterProps):this.points[u[h+O]])}if(c.length===0)throw new Error(o);return c}getLeaves(t,n,r){n=n||10,r=r||0;const o=[];return this._appendLeaves(o,t,n,r,0),o}getTile(t,n,r){const o=this.trees[this._limitZoom(t)],a=Math.pow(2,t),{extent:u,radius:l}=this.options,i=l/u,s=(r-i)/a,f=(r+1+i)/a,c={features:[]};return this._addTileFeatures(o.range((n-i)/a,s,(n+1+i)/a,f),o.data,n,r,a,c),n===0&&this._addTileFeatures(o.range(1-i/a,s,1,f),o.data,a,r,a,c),n===a-1&&this._addTileFeatures(o.range(0,s,i/a,f),o.data,-1,r,a,c),c.features.length?c:null}getClusterExpansionZoom(t){let n=this._getOriginZoom(t)-1;for(;n<=this.options.maxZoom;){const r=this.getChildren(t);if(n++,r.length!==1)break;t=r[0].properties.cluster_id}return n}_appendLeaves(t,n,r,o,a){const u=this.getChildren(n);for(const l of u){const i=l.properties;if(i&&i.cluster?a+i.point_count<=o?a+=i.point_count:a=this._appendLeaves(t,i.cluster_id,r,o,a):a<o?a++:t.push(l),t.length===r)break}return a}_createTree(t){const n=new Pe(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let r=0;r<t.length;r+=this.stride)n.add(t[r],t[r+1]);return n.finish(),n.data=t,n}_addTileFeatures(t,n,r,o,a,u){for(const l of t){const i=l*this.stride,s=n[i+x]>1;let f,c,d;if(s)f=Dt(n,i,this.clusterProps),c=n[i],d=n[i+1];else{const m=this.points[n[i+O]];f=m.properties;const[v,y]=m.geometry.coordinates;c=ee(v),d=te(y)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*a-r)),Math.round(this.options.extent*(d*a-o))]],tags:f};let p;s||this.options.generateId?p=n[i+O]:p=this.points[n[i+O]].id,p!==void 0&&(h.id=p),u.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,n){const{radius:r,extent:o,reduce:a,minPoints:u}=this.options,l=r/(o*Math.pow(2,n)),i=t.data,s=[],f=this.stride;for(let c=0;c<i.length;c+=f){if(i[c+D]<=n)continue;i[c+D]=n;const d=i[c],h=i[c+1],p=t.within(i[c],i[c+1],l),m=i[c+x];let v=m;for(const y of p){const _=y*f;i[_+D]>n&&(v+=i[_+x])}if(v>m&&v>=u){let y=d*m,_=h*m,b,w=-1;const M=((c/f|0)<<5)+(n+1)+this.points.length;for(const S of p){const T=S*f;if(i[T+D]<=n)continue;i[T+D]=n;const P=i[T+x];y+=i[T]*P,_+=i[T+1]*P,i[T+ve]=M,a&&(b||(b=this._map(i,c,!0),w=this.clusterProps.length,this.clusterProps.push(b)),a(b,this._map(i,T)))}i[c+ve]=M,s.push(y/v,_/v,1/0,M,-1,v),a&&s.push(w)}else{for(let y=0;y<f;y++)s.push(i[c+y]);if(v>1)for(const y of p){const _=y*f;if(!(i[_+D]<=n)){i[_+D]=n;for(let b=0;b<f;b++)s.push(i[_+b])}}}}return s}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,n,r){if(t[n+x]>1){const u=this.clusterProps[t[n+Lt]];return r?Object.assign({},u):u}const o=this.points[t[n+O]].properties,a=this.options.map(o);return r&&a===o?Object.assign({},a):a}};function lt(e,t,n){return{type:"Feature",id:e[t+O],properties:Dt(e,t,n),geometry:{type:"Point",coordinates:[Ro(e[t]),$o(e[t+1])]}}}function Dt(e,t,n){const r=e[t+x],o=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?`${Math.round(r/100)/10}k`:r,a=e[t+Lt],u=a===-1?{}:Object.assign({},n[a]);return Object.assign(u,{cluster:!0,cluster_id:e[t+O],point_count:r,point_count_abbreviated:o})}function ee(e){return e/360+.5}function te(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Ro(e){return(e-.5)*360}function $o(e){const t=(180-e*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function Io(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function Rt(e,t,n){if(e!==null)for(var r,o,a,u,l,i,s,f=0,c=0,d,h=e.type,p=h==="FeatureCollection",m=h==="Feature",v=p?e.features.length:1,y=0;y<v;y++){s=p?e.features[y].geometry:m?e.geometry:e,d=s?s.type==="GeometryCollection":!1,l=d?s.geometries.length:1;for(var _=0;_<l;_++){var b=0,w=0;if(u=d?s.geometries[_]:s,u!==null){i=u.coordinates;var M=u.type;switch(f=n&&(M==="Polygon"||M==="MultiPolygon")?1:0,M){case null:break;case"Point":if(t(i,c,y,b,w)===!1)return!1;c++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<i.length;r++){if(t(i[r],c,y,b,w)===!1)return!1;c++,M==="MultiPoint"&&b++}M==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<i.length;r++){for(o=0;o<i[r].length-f;o++){if(t(i[r][o],c,y,b,w)===!1)return!1;c++}M==="MultiLineString"&&b++,M==="Polygon"&&w++}M==="Polygon"&&b++;break;case"MultiPolygon":for(r=0;r<i.length;r++){for(w=0,o=0;o<i[r].length;o++){for(a=0;a<i[r][o].length-f;a++){if(t(i[r][o][a],c,y,b,w)===!1)return!1;c++}w++}b++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(Rt(u.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ae(e){var t=[1/0,1/0,-1/0,-1/0];return Rt(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}Ae.default=Ae;const Fo={radius:60,minZoom:0,maxZoom:16,extent:512,nodeSize:64,log:!1},qo=(e,t)=>{const{cluster:n,render:r,renderCluster:o,data:a=[],zoomOnClick:u,zoomOnClickPadding:l=20,onClick:i,onClusterClick:s}=e,{map:f}=z(),[c,d]=g.useState([]),h=g.useMemo(()=>new Do({...Fo,...n}),[]);g.useEffect(()=>{if(f)return f.on("zoom",p),f.on("move",p),f.on("resize",p),()=>{f.off("zoom",p),f.off("move",p),f.off("resize",p)}},[f]),g.useEffect(()=>{a&&(h.load(a),p())},[a]),g.useImperativeHandle(t,()=>h,[]);const p=g.useCallback(lo(()=>{const y=m(),_=h.getClusters(...y);d(_.map(b=>({...b,id:b.id||Bt()})))},500),[]),m=()=>{const y=f.getBounds(),_=f.getZoom();return[[y.getWest(),y.getSouth(),y.getEast(),y.getNorth()],Math.round(_)]},v=y=>{const{properties:_}=y;if(!(_!=null&&_.cluster))return;const b=h.getLeaves(_.cluster_id,1/0),w=Ae(Io(b));f.fitBounds(It.LngLatBounds.convert(w),{padding:l})};return $(dt,{children:c.map(y=>{const{geometry:_,properties:b}=y,{point_count:w,cluster:M,cluster_id:S}=b;return M?$(ie,{lngLat:_.coordinates,onClick:()=>{s==null||s(w,S),u&&v(y)},children:ne(o)?o(w):o},y.id):$(ie,{lngLat:_.coordinates,onClick:()=>{i==null||i(b)},children:ne(r)?r(y):r},y.id)})})},ct=g.forwardRef(qo);try{ct.displayName="MarkerCluster",ct.__docgenInfo={description:"",displayName:"MarkerCluster",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"Feature<D>[]"}},cluster:{defaultValue:null,description:"聚合参数设置",name:"cluster",required:!1,type:{name:"Options<any, any>"}},zoomOnClick:{defaultValue:{value:"false"},description:"点击聚合点时，是否散开。",name:"zoomOnClick",required:!1,type:{name:"boolean"}},render:{defaultValue:null,description:"非聚合点渲染扩展",name:"render",required:!0,type:{name:"ReactNode | RenderMarkerFun"}},renderCluster:{defaultValue:null,description:"聚合点渲染扩展",name:"renderCluster",required:!1,type:{name:"ReactNode | RenderClusterMarkerFun"}},zoomOnClickPadding:{defaultValue:{value:"20"},description:"添加到给定边界的填充量",name:"zoomOnClickPadding",required:!1,type:{name:"number | PaddingOptions"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((data: D) => void)"}},onClusterClick:{defaultValue:null,description:"",name:"onClusterClick",required:!1,type:{name:"((count: number, clusterId: number) => void)"}}}}}catch{}try{Supercluster.displayName="Supercluster",Supercluster.__docgenInfo={description:"A very fast geospatial point clustering library for browsers and Node.",displayName:"Supercluster",props:{}}}catch{}const ft=e=>{const{code:t="CN"}=e,{map:n}=z();g.useEffect(()=>{t&&r(t)},[t]);const r=o=>{console.log(o),n.setFilter("admin-0-boundary-disputed",["all",["==",["get","disputed"],"true"],["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all",o],!0,!1]]),n.setFilter("admin-0-boundary",["all",["==",["get","admin_level"],0],["==",["get","disputed"],"false"],["==",["get","maritime"],"false"],["match",["get","worldview"],["all",o],!0,!1]]),n.setFilter("admin-0-boundary-bg",["all",["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all",o],!0,!1]])};return null};try{ft.displayName="WorldView",ft.__docgenInfo={description:"",displayName:"WorldView",props:{code:{defaultValue:null,description:"",name:"code",required:!1,type:{name:"enum",value:[{value:'"CN"'},{value:'"IN"'},{value:'"JP"'},{value:'"US"'}]}}}}}catch{}export{ot as L,nt as M,rt as S,ft as W,ie as a,at as b,ct as c,z as u};
