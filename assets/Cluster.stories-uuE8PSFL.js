import{j as r}from"./jsx-runtime-5BUNAZ9W.js";import{r as d}from"./index-4g5l5LRQ.js";import{M as m,S as f,u as y}from"./index-cYJ-m5fl.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./mapbox-gl-oa9XOBpX.js";import"./index-qTf6isfD.js";const h=()=>{const{map:e}=y();return d.useEffect(()=>{e&&(e.addSource("earthquakes",{type:"geojson",data:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",cluster:!0,clusterMaxZoom:14,clusterRadius:50}),e.addLayer({id:"clusters",type:"circle",source:"earthquakes",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),e.addLayer({id:"cluster-count",type:"symbol",source:"earthquakes",filter:["has","point_count"],layout:{"text-field":["get","point_count_abbreviated"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),e.addLayer({id:"unclustered-point",type:"circle",source:"earthquakes",filter:["!",["has","point_count"]],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),e.on("click","clusters",u=>{var o;const s=e.queryRenderedFeatures(u.point,{layers:["clusters"]}),l=(o=s[0].properties)==null?void 0:o.cluster_id;e.getSource("earthquakes").getClusterExpansionZoom(l,(n,p)=>{n||e.easeTo({center:s[0].geometry.coordinates,zoom:p})})}))},[e]),null},M={title:"示例/Cluster",render:()=>r(m,{zoom:3,center:[-103.5917,40.6699],style:"mapbox://styles/mapbox/dark-v11",containerStyle:{height:"100vh"},children:r(f,{children:r(h,{})})}),parameters:{layout:"fullscreen"},argTypes:{},args:{lngLat:[-122.414,37.776]}},t={args:{}};var a,c,i;t.parameters={...t.parameters,docs:{...(a=t.parameters)==null?void 0:a.docs,source:{originalSource:`{
  args: {}
}`,...(i=(c=t.parameters)==null?void 0:c.docs)==null?void 0:i.source}}};const S=["Cluster"];export{t as Cluster,S as __namedExportsOrder,M as default};
